@model JamesRecipes.Models.Contest;

@using Newtonsoft.Json; 

@{
    ViewData["Title"] = "Contest Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}
@{
    var userJson = Context.Session.GetString("userLogged");
    User user = null;

    if (!string.IsNullOrEmpty(userJson))
    {
        user = JsonConvert.DeserializeObject<User>(userJson);
    }
}

<h1>Contest Details</h1>

<div>
    <h4>@Model.Title</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Title)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Guidelines)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Guidelines)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.EndDate)
        </dd>

        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.CreatedAt)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.CreatedAt)
        </dd>

        <dt class="col-sm-2">
            Image:
        </dt>
        <dd class="col-sm-10">
            <img src="@Url.Content("~/"+Model.Image)" alt="Contest Images" style="max-width:400px; max-height:400px;" />
        </dd>
    </dl>
</div>

@if (user != null && (user.RoleId == 1 || user.RoleId == 2 || user.RoleId == 3))
{
    <div>
         
        <a asp-action="Create" asp-controller="Recipe" asp-route-id="ContestID">Submit New Recipe</a>
        ||
        <a asp-action="CreateContestRecipe" asp-controller="ContestEntries">Submit From Inventory</a>
    </div>
}
else if (user != null)
{
    <div>
        Submit Your Recipe <a asp-action="Login" asp-controller="ContestLogin" class="text-danger">Here</a>
    </div>
}
else
{
    <div>
        <a asp-action="Login" asp-controller="ContestLogin">Please login to submit your recipe</a>
    </div>
}

<div>
    <a asp-action="Index" asp-controller="Contest">Back to Contest List</a>
</div>

<div>
    <a asp-action="CreateContestRecipe" asp-controller="ContestEntries">View Contest Entries</a>
</div>
